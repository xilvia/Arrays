<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <script>
        // ===== .map() =====

        // What you have

        var officers = [{
                id: 20,
                name: 'Captain Piett'
            },
            {
                id: 24,
                name: 'General Veers'
            },
            {
                id: 56,
                name: 'Admiral Ozzel'
            },
            {
                id: 88,
                name: 'Commander Jerjerrod'
            }
        ];
        console.log(officers)

        // What you need
        // [20, 24, 56, 88]

        var officersIds = [];
        officers.forEach(function (officer) {
            officersIds.push(officer.id);
        });
        console.log(officersIds)

        var officersIds2 = officers.map(function (officer) {
            return officer.id
        });
        console.log(officersIds2)

        // with arrow function

        const officersIds3 = officers.map(officer => officer.id);
        console.log(officersIds3)

        // ===== .reduce() =====

        var pilots = [{
                id: 10,
                name: "Poe Dameron",
                years: 14,
            },
            {
                id: 2,
                name: "Temmin 'Snap' Wexley",
                years: 30,
            },
            {
                id: 41,
                name: "Tallissan Lintra",
                years: 16,
            },
            {
                id: 99,
                name: "Ello Asty",
                years: 22,
            }
        ];
        console.log(pilots)

        // get total experiences of all pilots

        var totalYears1 = pilots.reduce(function (accumulator, pilot) {
            return accumulator + pilot.years;
        }, 0);
        console.log(totalYears1)

        // with arrow function

        const totalYears2 = pilots.reduce((acc, pilot) => acc + pilot.years, 0);
        console.log(totalYears2)

        // the most experienced pilot

        var mostExpPilot = pilots.reduce(function (oldest, pilot) {
            return (oldest.years || 0) > pilot.years ? oldest : pilot;
        }, {});
        console.log(mostExpPilot)

        // ===== .reduce() =====

        var pilots2 = [{
                id: 2,
                name: "Wedge Antilles",
                faction: "Rebels",
            },
            {
                id: 8,
                name: "Ciena Ree",
                faction: "Empire",
            },
            {
                id: 40,
                name: "Iden Versio",
                faction: "Empire",
            },
            {
                id: 66,
                name: "Thane Kyrell",
                faction: "Rebels",
            }
        ];
        console.log(pilots2)

        // pilots divided into rebels and imperials

        var rebels = pilots.filter(function (pilot) {
            return pilot.faction === "Rebels";
        });
        var empire = pilots.filter(function (pilot) {
            return pilot.faction === "Empire";
        });

        console.log(rebels);
        console.log(empire);

        // with arrow function

        const rebels2 = pilots.filter(pilot => pilot.faction === "Rebels");
        const empire2 = pilots.filter(pilot => pilot.faction === "Empire");

        // ===== Combining .map(), .reduce(), and .filter() =====

        var personnel = [{
                id: 5,
                name: "Luke Skywalker",
                pilotingScore: 98,
                shootingScore: 56,
                isForceUser: true,
            },
            {
                id: 82,
                name: "Sabine Wren",
                pilotingScore: 73,
                shootingScore: 99,
                isForceUser: false,
            },
            {
                id: 22,
                name: "Zeb Orellios",
                pilotingScore: 20,
                shootingScore: 59,
                isForceUser: false,
            },
            {
                id: 15,
                name: "Ezra Bridger",
                pilotingScore: 43,
                shootingScore: 67,
                isForceUser: true,
            },
            {
                id: 11,
                name: "Caleb Dume",
                pilotingScore: 71,
                shootingScore: 85,
                isForceUser: true,
            },
        ];
        console.log(personnel);

        // get the total score of force users only

        // 1. filter out the personnel who canâ€™t use the force

        var jediPersonnel = personnel.filter(function (person) {
            return person.isForceUser;
        });
        console.log(jediPersonnel);

        // 2. create an array containing the total score of each Jedi

        var jediScores = jediPersonnel.map(function (jedi) {
            return jedi.pilotingScore + jedi.shootingScore;
        });
        console.log(jediScores);

        // 3. get the total JediScore

        var totalJediScore = jediScores.reduce(function (acc, score) {
            return acc + score;
        }, 0);
        console.log(totalJediScore);

        // combining .map(), .reduce(), .filter()

        var totalJediScoreShortcut = personnel
            .filter(function (person) {
                return person.isForceUser;
            })
            .map(function (jedi) {
                return jedi.pilotingScore + jedi.shootingScore;
            })
            .reduce(function (acc, score) {
                return acc + score;
            }, 0);
        console.log(totalJediScoreShortcut);

        // combining .map(), .reduce(), .filter() + arrow function

        const totalJediScoreShortcutAF = personnel
            .filter(person => person.isForceUser)
            .map(jedi => jedi.pilotingScore + jedi.shootingScore)
            .reduce((acc, score) => acc + score, 0);

        // the same result with only .reduce()

        const totalJediScoreReduceOnly = personnel.reduce((acc, person) => person.isForceUser ? acc + person
            .pilotingScore + person.shootingScore : acc, 0);

        console.log(totalJediScoreReduceOnly);
    </script>
</body>

</html>